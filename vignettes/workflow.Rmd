---
title: "workflow"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{workflow}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}

devtools::load_all()
library(tidyverse)
# library(easyrgee)
library(surveyGEER) # loads example datset as dat
library(here)


```

## DEMO
- read in original raw data 

```{r}
path_to_data_csv <-  "enter here"
dat <-  read_csv(path_to_data_csv)
longitude_col_name <- "enter here"
latitude_col_name <-  "enter here"
uid_col_name <-  "enter_here"
```

- run `setup_geo_data` function to anonymize data 
- creates a `data_share` folder with anonymized coordinates 
- creates a `vault` folder with a lookup table

```{r}


decouple_coordinates(df = dat,
               uuid = uid_col_name,
               lon = longitude_col_name ,
               lat = latitude_col_name 
               )

# done
```

Let's look at the outputs - first the anonymized coordinates
The geodata is anonymous.
- this file can be sent to RS analyst for RS extraction
- the data keeper can should delete this folder after sending and keep only the vault folder

```{r}
geodat <- read_rds(file = "data_share/coords_anonymized.rds")
```


lockup is also is anonymous.
```{r}
lookup<- read_rds("vault/lookup.rds")
```

